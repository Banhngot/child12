<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KARA - Child Protection System (Canada)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.24.7/babel.min.js"></script>
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
  </style>
</head>
<body class="bg-gray-100">
  <div id="root"></div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1"></script>

  <script type="text/babel">
    const ABUSE_INDICATORS = {
      neglect: {
        low:      ["delay", "ignore", "late", "forget", "miss"],
        medium:   ["overlook", "omit", "neglect", "fail to provide"],
        high:     ["deny care", "deny food", "deny safety", "withhold", "refuse treatment"],
        critical: ["abandon", "endanger", "leave alone", "desert"]
      },
      abuse: {
        low:      ["push", "grab", "poke", "shove", "slap"],
        medium:   ["hit", "strike", "kick", "pull hair", "pinch", "spank hard"],
        high:     ["punch", "choke", "beat", "whip", "throw", "slam"],
        critical: ["assault", "stab", "strangle", "burn", "bludgeon", "rape", "sexual abuse"]
      }
    };

    function detectAbuseLevel(content) {
      const text = content.trim().toLowerCase();
      let count = { low: 0, medium: 0, high: 0, critical: 0 };
      let detectedType = "none";

      const check = (list, level) => {
        list.forEach(word => {
          if (text.includes(word.toLowerCase())) {
            count[level]++;
            if (detectedType === "none") detectedType = (level === "critical" || level === "high" || level === "medium") ? "abuse" : "neglect";
          }
        });
      };

      Object.values(ABUSE_INDICATORS.neglect).forEach((arr, i) => check(arr, ["low","medium","high","critical"][i]));
      Object.values(ABUSE_INDICATORS.abuse).forEach((arr, i) => check(arr, ["low","medium","high","critical"][i]));

      if (count.critical > 0) return { level: "critical", type: detectedType === "none" ? "neglect" : detectedType, reason: "Critical keyword(s) detected" };
      if (count.high >= 2) return { level: "critical", type: "abuse", reason: "2+ high-level keywords → Critical" };
      if (count.medium >= 3) return { level: "high", type: detectedType, reason: "3+ medium-level keywords → High" };
      if (count.low >= 4) return { level: "medium", type: detectedType, reason: "4+ low-level keywords → Medium" };
      if (count.high > 0) return { level: "high", type: "abuse", reason: "High-risk detected" };
      if (count.medium > 0) return { level: "medium", type: detectedType, reason: "Medium-risk detected" };
      if (count.low > 0) return { level: "low", type: detectedType, reason: "Low-risk signs" };
      return { level: "low", type: "none", reason: "No signs detected" };
    }

    const USERS = [{ username: "admin", role: "admin" }, { username: "user", role: "user" }, { username: "organization", role: "organization" }];
    const DEMO_PASSWORD = "123";

    const calculateAge = (dob) => {
      if (!dob) return null;
      const birth = new Date(dob);
      const today = new Date();
      let age = today.getFullYear() - birth.getFullYear();
      const m = today.getMonth() - birth.getMonth();
      if (m < 0 || (m === 0 && today.getDate() < birth.getDate())) age--;
      return age >= 0 ? age : null;
    };

    const formatDateUS = (dateStr) => {
      if (!dateStr) return "-";
      const d = new Date(dateStr);
      return `${String(d.getMonth()+1).padStart(2,'0')}/${String(d.getDate()).padStart(2,'0')}/${d.getFullYear()}`;
    };

    function App() {
      const savedCases = JSON.parse(localStorage.getItem("kara_cases") || "[]");
      const savedUser = JSON.parse(localStorage.getItem("kara_current_user") || "null");

      const [user, setUser] = React.useState(savedUser);
      const [cases, setCases] = React.useState(savedCases);

      const [username, setUsername] = React.useState("");
      const [password, setPassword] = React.useState("");
      const [loginErr, setLoginErr] = React.useState("");

      const [caseType, setCaseType] = React.useState("case_note");
      const [childName, setChildName] = React.useState("");
      const [childDOB, setChildDOB] = React.useState("");
      const [childGender, setChildGender] = React.useState("male");
      const [province, setProvince] = React.useState("Ontario");
      const [territory, setTerritory] = React.useState("Nunavut");
      const [content, setContent] = React.useState("");
      const [editingId, setEditingId] = React.useState(null);

      const [search, setSearch] = React.useState("");
      const [filterLevel, setFilterLevel] = React.useState("all");
      const [filterType, setFilterType] = React.useState("all");
      const [filterProvince, setFilterProvince] = React.useState("all");
      const [filterTerritory, setFilterTerritory] = React.useState("all");
      const [filterAgeMin, setFilterAgeMin] = React.useState("");
      const [filterAgeMax, setFilterAgeMax] = React.useState("");
      const [sortColumn, setSortColumn] = React.useState("date");
      const [sortOrder, setSortOrder] = React.useState("desc");

      React.useEffect(() => { localStorage.setItem("kara_cases", JSON.stringify(cases)); }, [cases]);
      React.useEffect(() => { localStorage.setItem("kara_current_user", JSON.stringify(user)); }, [user]);

      const handleLogin = (e) => {
        e.preventDefault();
        const found = USERS.find(u => u.username === username && password === DEMO_PASSWORD);
        if (found) { setUser(found); setLoginErr(""); setUsername(""); setPassword(""); }
        else setLoginErr("Incorrect username or password");
      };

      const handleLogout = () => {
        setUser(null);
        localStorage.removeItem("kara_current_user");
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        if (!childName.trim() || !childDOB || !content.trim()) return alert("Please fill all required fields");

        const age = calculateAge(childDOB);
        if (age === null) return alert("Invalid date of birth");

        const detection = detectAbuseLevel(content);

        const newCase = {
          id: editingId || Date.now(),
          type: caseType,
          childName: childName.trim(),
          childAge: age,
          childDOB,
          childGender,
          province,
          territory,
          content: content.trim(),
          extracted: detection.reason,
          date: new Date().toISOString().slice(0,10),
          prediction: detection.level,
          abuseType: detection.type,
          createdBy: editingId ? cases.find(c => c.id === editingId).createdBy : user.role,
          notified: detection.level === "critical"
        };

        if (editingId) {
          setCases(prev => prev.map(c => c.id === editingId ? newCase : c));
          alert("Case updated successfully!");
        } else {
          setCases(prev => [newCase, ...prev]);
          alert("Case added successfully!");
        }

        setChildName(""); setChildDOB(""); setContent(""); setEditingId(null);
      };

      const handleEdit = (c) => {
        if (user.role === "user") return alert("You do not have permission to edit");
        setEditingId(c.id); setCaseType(c.type); setChildName(c.childName);
        setChildDOB(c.childDOB); setChildGender(c.childGender);
        setProvince(c.province); setTerritory(c.territory); setContent(c.content);
      };

      const handleDelete = (id) => {
        if (user.role === "user") return alert("You do not have permission to delete");
        if (confirm("Delete this case permanently?")) setCases(prev => prev.filter(c => c.id !== id));
      };

      // STATISTICS
      const stats = React.useMemo(() => {
        const list = user?.role === "organization" ? cases : cases.filter(c => c.createdBy !== "organization");
        const total = list.length;
        const critical = list.filter(c => c.prediction === "critical").length;
        const high = list.filter(c => c.prediction === "high").length;
        const medium = list.filter(c => c.prediction === "medium").length;
        const low = list.filter(c => c.prediction === "low").length;
        const hasAlert = list.some(c => c.notified);

        const gender = { male: 0, female: 0, other: 0 };
        const ageGroups = { "0-4": 0, "5-9": 0, "10-14": 0, "15-17": 0, "18+": 0 };
        const provinces = {
          "Alberta": 0, "British Columbia": 0, "Manitoba": 0, "New Brunswick": 0,
          "Newfoundland and Labrador": 0, "Nova Scotia": 0, "Ontario": 0,
          "Prince Edward Island": 0, "Quebec": 0, "Saskatchewan": 0
        };
        const territories = { "Northwest Territories": 0, "Nunavut": 0, "Yukon": 0 };
        const dates = {};

        list.forEach(c => {
          gender[c.childGender]++;
          if (c.childAge <= 4) ageGroups["0-4"]++;
          else if (c.childAge <= 9) ageGroups["5-9"]++;
          else if (c.childAge <= 14) ageGroups["10-14"]++;
          else if (c.childAge <= 17) ageGroups["15-17"]++;
          else ageGroups["18+"]++;

          if (provinces.hasOwnProperty(c.province)) provinces[c.province]++;
          if (territories.hasOwnProperty(c.territory)) territories[c.territory]++;

          dates[c.date] = (dates[c.date] || 0) + 1;
        });

        return { total, critical, high, medium, low, hasAlert, gender, ageGroups, provinces, territories, dates };
      }, [cases, user]);

      // CHARTS
      const chartRefs = {
        gender: React.useRef(null),
        age: React.useRef(null),
        province: React.useRef(null),
        territory: React.useRef(null),
        trend: React.useRef(null)
      };

      React.useEffect(() => {
        if (!window.Chart) return;
        const charts = {};

        if (chartRefs.gender.current) charts.gender = new Chart(chartRefs.gender.current, { type: "doughnut", data: { labels: ["Male", "Female", "Other"], datasets: [{ data: Object.values(stats.gender), backgroundColor: ["#3B82F6","#EC4899","#6B7280"] }] }, options: { responsive: true, plugins: { legend: { position: "bottom" }, title: { display: true, text: "Gender Distribution" } } } });

        if (chartRefs.age.current) charts.age = new Chart(chartRefs.age.current, { type: "bar", data: { labels: ["0-4","5-9","10-14","15-17","18+"], datasets: [{ label: "Cases", data: Object.values(stats.ageGroups), backgroundColor: "#10B981" }] }, options: { responsive: true, plugins: { title: { display: true, text: "Age Group Distribution" } }, scales: { y: { beginAtZero: true } } } });

        if (chartRefs.province.current) charts.province = new Chart(chartRefs.province.current, { type: "bar", data: { labels: Object.keys(stats.provinces), datasets: [{ label: "Cases", data: Object.values(stats.provinces), backgroundColor: "#6366F1" }] }, options: { indexAxis: "y", responsive: true, plugins: { title: { display: true, text: "Cases by Province (10 Provinces)" } } } });

        if (chartRefs.territory.current) charts.territory = new Chart(chartRefs.territory.current, { type: "doughnut", data: { labels: ["Northwest Territories","Nunavut","Yukon"], datasets: [{ data: Object.values(stats.territories), backgroundColor: ["#F59E0B","#EF4444","#8B5CF6"] }] }, options: { responsive: true, plugins: { legend: { position: "bottom" }, title: { display: true, text: "Cases by Territory (3 Territories)" } } } });

        if (chartRefs.trend.current && Object.keys(stats.dates).length > 0) {
          const sorted = Object.keys(stats.dates).sort();
          charts.trend = new Chart(chartRefs.trend.current, { type: "line", data: { labels: sorted, datasets: [{ label: "Cases", data: sorted.map(d=>stats.dates[d]), borderColor: "#EF4444", tension: 0.3, fill: true, backgroundColor: "rgba(239,68,68,0.1)" }] }, options: { responsive: true, plugins: { title: { display: true, text: "Trend Over Time" } } } });
        }

        return () => Object.values(charts).forEach(c => c?.destroy());
      }, [stats]);

      // FILTER & SORT
      const filteredAndSortedCases = React.useMemo(() => {
        let list = user?.role === "organization" ? cases : cases.filter(c => c.createdBy !== "organization");

        if (search) {
          const s = search.toLowerCase();
          list = list.filter(c => c.childName.toLowerCase().includes(s) || c.content.toLowerCase().includes(s));
        }
        if (filterLevel !== "all") list = list.filter(c => c.prediction === filterLevel);
        if (filterType !== "all") list = list.filter(c => c.abuseType === filterType);
        if (filterProvince !== "all") list = list.filter(c => c.province === filterProvince);
        if (filterTerritory !== "all") list = list.filter(c => c.territory === filterTerritory);
        if (filterAgeMin || filterAgeMax) {
          const min = filterAgeMin === "" ? -Infinity : Number(filterAgeMin);
          const max = filterAgeMax === "" ? Infinity : Number(filterAgeMax);
          list = list.filter(c => c.childAge >= min && c.childAge <= max);
        }

        const order = sortOrder === "asc" ? 1 : -1;
        list.sort((a, b) => {
          switch (sortColumn) {
            case "name": return order * a.childName.localeCompare(b.childName);
            case "age": return order * (a.childAge - b.childAge);
            case "level": const lvl = { low:0, medium:1, high:2, critical:3 }; return order * (lvl[b.prediction] - lvl[a.prediction]);
            case "date": default: return order * (b.date.localeCompare(a.date));
          }
        });
        return list;
      }, [cases, user, search, filterLevel, filterType, filterProvince, filterTerritory, filterAgeMin, filterAgeMax, sortColumn, sortOrder]);

      const toggleSort = (col) => {
        if (sortColumn === col) setSortOrder(prev => prev === "asc" ? "desc" : "asc");
        else { setSortColumn(col); setSortOrder("desc"); }
      };

      return (
        <div className="min-h-screen bg-gray-50">
          {!user ? (
            <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100">
              <div className="bg-white p-12 rounded-2xl shadow-2xl w-96 text-center">
                <h2 className="text-4xl font-bold text-blue-700 mb-8">KARA - Child Protection</h2>
                <form onSubmit={handleLogin} className="space-y-6">
                  <input className="w-full p-4 border-2 rounded-xl" placeholder="Username" value={username} onChange={e=>setUsername(e.target.value)} required />
                  <input className="w-full p-4 border-2 rounded-xl" type="password" placeholder="Password" value={password} onChange={e=>setPassword(e.target.value)} required />
                  <button className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 rounded-xl font-bold text-lg hover:from-blue-700 hover:to-indigo-700">Login</button>
                </form>
                {loginErr && <p className="text-red-600 mt-4 font-bold">{loginErr}</p>}
                <p className="mt-6 text-sm text-gray-600">Demo accounts: <strong>admin</strong>, <strong>user</strong>, <strong>organization</strong> — Password: <strong>123</strong></p>
              </div>
            </div>
          ) : (
            <>
              <header className="bg-gradient-to-r from-blue-700 to-indigo-800 text-white p-6 shadow-xl">
                <div className="max-w-7xl mx-auto flex justify-between items-center">
                  <h1 className="text-3xl font-bold">KARA - Child Protection System (Canada)</h1>
                  <div className="flex items-center gap-6">
                    <span className="text-lg">Welcome <strong>{user.username}</strong> ({user.role})</span>
                    <button onClick={handleLogout} className="bg-white text-blue-700 px-6 py-3 rounded-lg font-bold hover:bg-gray-100">Logout</button>
                  </div>
                </div>
              </header>

              <div className="max-w-7xl mx-auto p-6 grid lg:grid-cols-2 gap-8">
                {/* Form */}
                <div className="bg-white rounded-2xl shadow-xl p-8">
                  <h3 className="text-2xl font-bold text-blue-700 mb-6">{editingId ? "Edit Case" : "New Case Entry"}</h3>
                  {stats.hasAlert && <div className="bg-red-100 border-l-4 border-red-600 text-red-800 p-5 rounded mb-6 font-bold text-lg">CRITICAL CASE DETECTED – IMMEDIATE ACTION REQUIRED!</div>}
                  <form onSubmit={handleSubmit} className="space-y-5">
                    <select value={caseType} onChange={e=>setCaseType(e.target.value)} className="w-full p-4 border-2 rounded-xl">
                      <option value="case_note">Case Note</option>
                      <option value="school_report">School Report</option>
                      <option value="medical_document">Medical Record</option>
                    </select>
                    <input required placeholder="Child's Full Name" value={childName} onChange={e=>setChildName(e.target.value)} className="w-full p-4 border-2 rounded-xl" />
                    <input required type="date" value={childDOB} onChange={e=>setChildDOB(e.target.value)} className="w-full p-4 border-2 rounded-xl" />
                    <select value={childGender} onChange={e=>setChildGender(e.target.value)} className="w-full p-4 border-2 rounded-xl">
                      <option value="male">Male</option>
                      <option value="female">Female</option>
                      <option value="other">Other</option>
                    </select>

                    {/* 10 Provinces */}
                    <select value={province} onChange={e=>setProvince(e.target.value)} className="w-full p-4 border-2 rounded-xl bg-blue-50 font-medium">
                      <option value="Alberta">Alberta</option>
                      <option value="British Columbia">British Columbia</option>
                      <option value="Manitoba">Manitoba</option>
                      <option value="New Brunswick">New Brunswick</option>
                      <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                      <option value="Nova Scotia">Nova Scotia</option>
                      <option value="Ontario">Ontario</option>
                      <option value="Prince Edward Island">Prince Edward Island</option>
                      <option value="Quebec">Quebec</option>
                      <option value="Saskatchewan">Saskatchewan</option>
                    </select>

                    {/* 3 Territories */}
                    <select value={territory} onChange={e=>setTerritory(e.target.value)} className="w-full p-4 border-2 rounded-xl bg-amber-50 font-medium">
                      <option value="Northwest Territories">Northwest Territories</option>
                      <option value="Nunavut">Nunavut</option>
                      <option value="Yukon">Yukon</option>
                    </select>

                    <textarea required placeholder="Describe the incident or observations..." value={content} onChange={e=>setContent(e.target.value)} className="w-full p-4 border-2 rounded-xl h-40 resize-none"></textarea>

                    <button type="submit" className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-5 rounded-xl font-bold text-xl hover:from-blue-700 hover:to-indigo-700 transition shadow-lg">
                      {editingId ? "Update Case" : "Submit & Analyze Risk"}
                    </button>
                    {editingId && <button type="button" onClick={()=>{setEditingId(null);setChildName("");setChildDOB("");setContent("");}} className="w-full bg-gray-600 text-white py-4 rounded-xl font-bold hover:bg-gray-700">Cancel</button>}
                  </form>
                </div>

                {/* Dashboard */}
                <div className="bg-white rounded-2xl shadow-xl p-8 space-y-8">
                  <h3 className="text-2xl font-bold text-blue-700">National Statistics</h3>
                  <div className="grid grid-cols-2 gap-6 text-center">
                    <div className="bg-gray-100 p-6 rounded-xl"><p className="text-4xl font-bold">{stats.total}</p><p>Total Cases</p></div>
                    <div className="bg-red-100 p-6 rounded-xl"><p className="text-4xl font-bold text-red-600">{stats.critical}</p><p>Critical</p></div>
                    <div className="bg-orange-100 p-6 rounded-xl"><p className="text-4xl font-bold text-orange-700">{stats.high}</p><p>High</p></div>
                    <div className="bg-yellow-100 p-6 rounded-xl"><p className="text-4xl font-bold text-yellow-700">{stats.medium}</p><p>Medium</p></div>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div><canvas ref={chartRefs.gender}></canvas></div>
                    <div><canvas ref={chartRefs.age}></canvas></div>
                    <div className="md:col-span-2"><canvas ref={chartRefs.province} height="180"></canvas></div>
                    <div><canvas ref={chartRefs.territory}></canvas></div>
                    <div><canvas ref={chartRefs.trend}></canvas></div>
                  </div>
                </div>
              </div>

              {/* Case History Table (Admin & Organization only) */}
              {(user.role === "admin" || user.role === "organization") && (
                <div className="max-w-7xl mx-auto p-6">
                  <div className="bg-white rounded-2xl shadow-xl p-8">
                    <h3 className="text-2xl font-bold text-blue-700 mb-6">Case History ({filteredAndSortedCases.length} cases)</h3>

                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-4 mb-8">
                      <input placeholder="Search name / content..." value={search} onChange={e=>setSearch(e.target.value)} className="px-5 py-3 border-2 rounded-xl" />
                      <select value={filterLevel} onChange={e=>setFilterLevel(e.target.value)} className="px-5 py-3 border-2 rounded-xl">
                        <option value="all">All Levels</option>
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                        <option value="critical">Critical</option>
                      </select>
                      <select value={filterProvince} onChange={e=>setFilterProvince(e.target.value)} className="px-5 py-3 border-2 rounded-xl">
                        <option value="all">All Provinces</option>
                        <option value="Alberta">Alberta</option>
                        <option value="British Columbia">British Columbia</option>
                        <option value="Manitoba">Manitoba</option>
                        <option value="New Brunswick">New Brunswick</option>
                        <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                        <option value="Nova Scotia">Nova Scotia</option>
                        <option value="Ontario">Ontario</option>
                        <option value="Prince Edward Island">Prince Edward Island</option>
                        <option value="Quebec">Quebec</option>
                        <option value="Saskatchewan">Saskatchewan</option>
                      </select>
                      <select value={filterTerritory} onChange={e=>setFilterTerritory(e.target.value)} className="px-5 py-3 border-2 rounded-xl">
                        <option value="all">All Territories</option>
                        <option value="Northwest Territories">Northwest Territories</option>
                        <option value="Nunavut">Nunavut</option>
                        <option value="Yukon">Yukon</option>
                      </select>
                      <div className="flex gap-2">
                        <input type="number" placeholder="Min age" value={filterAgeMin} onChange={e=>setFilterAgeMin(e.target.value)} className="w-24 px-4 py-3 border-2 rounded-xl" />
                        <input type="number" placeholder="Max age" value={filterAgeMax} onChange={e=>setFilterAgeMax(e.target.value)} className="w-24 px-4 py-3 border-2 rounded-xl" />
                      </div>
                      <button onClick={()=>{setSearch("");setFilterLevel("all");setFilterProvince("all");setFilterTerritory("all");setFilterAgeMin("");setFilterAgeMax("");}} className="bg-red-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-red-700">Clear</button>
                    </div>

                    <div className="overflow-x-auto rounded-xl border">
                      <table className="w-full text-left">
                        <thead className="bg-gradient-to-r from-blue-600 to-indigo-600 text-white">
                          <tr>
                            <th className="p-4 cursor-pointer" onClick={()=>toggleSort("name")}>Child Name {sortColumn==="name" && (sortOrder==="asc" ? "Up" : "Down")}</th>
                            <th className="p-4">DOB</th>
                            <th className="p-4 cursor-pointer" onClick={()=>toggleSort("age")}>Age {sortColumn==="age" && (sortOrder==="asc" ? "Up" : "Down")}</th>
                            <th className="p-4 cursor-pointer" onClick={()=>toggleSort("level")}>Risk Level {sortColumn==="level" && (sortOrder==="asc" ? "Up" : "Down")}</th>
                            <th className="p-4">Type</th>
                            <th className="p-4">Province</th>
                            <th className="p-4">Territory</th>
                            <th className="p-4 cursor-pointer" onClick={()=>toggleSort("date")}>Date {sortColumn==="date" && (sortOrder==="asc" ? "Up" : "Down")}</th>
                            <th className="p-4">Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          {filteredAndSortedCases.length === 0 ? (
                            <tr><td colSpan="9" className="p-12 text-center text-gray-500 text-xl">No cases found</td></tr>
                          ) : (
                            filteredAndSortedCases.map(c => (
                              <tr key={c.id} className="border-b hover:bg-gray-50">
                                <td className="p-4 font-medium">{c.childName}</td>
                                <td className="p-4">{formatDateUS(c.childDOB)}</td>
                                <td className="p-4 text-center font-bold text-lg">{c.childAge}</td>
                                <td className={`p-4 font-bold ${c.prediction==="critical"?"text-red-600":c.prediction==="high"?"text-orange-600":c.prediction==="medium"?"text-yellow-700":"text-green-600"}`}>
                                  {c.prediction.toUpperCase()}
                                </td>
                                <td className="p-4">{c.abuseType === "neglect" ? "Neglect" : c.abuseType === "abuse" ? "Physical Abuse" : "-"}</td>
                                <td className="p-4">{c.province}</td>
                                <td className="p-4">{c.territory}</td>
                                <td className="p-4">{c.date}</td>
                                <td className="p-4">
                                  <button onClick={()=>handleEdit(c)} className="bg-blue-600 text-white px-4 py-2 rounded-lg mr-2 hover:bg-blue-700">Edit</button>
                                  <button onClick={()=>handleDelete(c.id)} className="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700">Delete</button>
                                </td>
                              </tr>
                            ))
                          )}
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              )}
            </>
          )}
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById("root"));
  </script>
</body>
</html>
